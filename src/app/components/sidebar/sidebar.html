<!-- Mobile/Tablet: Backdrop overlay -->
@if (sidebarService.deviceType() !== 'desktop' && sidebarService.isOpen()) {
  <div
    class="fixed inset-0 bg-black/50 z-40 transition-opacity duration-300"
    (click)="closeSidebar()"
  ></div>
}

<!-- Sidebar Container -->
<aside
  class="fixed left-0 bg-[#177E94] z-50 transition-all duration-300 ease-in-out shadow-lg"
  [class.top-0]="sidebarService.deviceType() !== 'desktop'"
  [class.h-screen]="sidebarService.deviceType() !== 'desktop'"
  [class.top-16]="sidebarService.deviceType() === 'desktop'"
  [class.h-[calc(100vh-4rem)]]="sidebarService.deviceType() === 'desktop'"
  [class.translate-x-0]="sidebarService.isVisible()"
  [class.-translate-x-full]="!sidebarService.isVisible() && sidebarService.deviceType() !== 'desktop'"
  [class.w-64]="shouldShowLabels()"
  [class.w-16]="!shouldShowLabels() && sidebarService.deviceType() === 'desktop'"
  (mouseenter)="onMouseEnter()"
  (mouseleave)="onMouseLeave()"
>
  <!-- Navigation Menu -->
  <nav class="flex flex-col h-full py-4">
    <ul class="flex flex-col gap-1 px-2">
      @for (item of menuItems; track item.route) {
        <li>
          <a
            [routerLink]="item.route"
            routerLinkActive="bg-white/20 text-white"
            [routerLinkActiveOptions]="{ exact: false }"
            class="flex items-center gap-3 px-3 py-3 rounded-lg hover:bg-white/10 transition-all duration-200 group text-white"
            [class.justify-center]="!shouldShowLabels()"
            (click)="sidebarService.deviceType() !== 'desktop' && closeSidebar()"
          >
            <!-- Icon using PrimeIcons -->
            <i class="pi {{ item.icon }} text-xl text-white"></i>

            <!-- Label (hidden when collapsed on desktop) -->
            @if (shouldShowLabels()) {
              <span class="font-medium whitespace-nowrap text-white">
                {{ item.label }}
              </span>
            }
          </a>
        </li>
      }
    </ul>

    <!-- Spacer to push bottom items down -->
    <div class="flex-1"></div>

    <!-- Bottom section (optional: logout, profile, etc.) -->
    <div class="px-2 pt-4 border-t border-white/20">
      <button
        class="flex items-center gap-3 px-3 py-3 rounded-lg hover:bg-white/10 transition-all duration-200 w-full text-white"
        [class.justify-center]="!shouldShowLabels()"
      >
        <i class="pi pi-sign-out text-xl"></i>
        @if (shouldShowLabels()) {
          <span class="font-medium whitespace-nowrap">
            Logout
          </span>
        }
      </button>
    </div>
  </nav>
</aside>
